!function(e){e.rpopup=function(o){function t(o){e.each(o,function(o,t){function n(e,o,t){var i=0;if(/%/.test(o)){var s=e*(r=parseInt(o))/100;i=50==r?s-t/2:s+t>e?e-t:s}else{var r;i=(r=parseInt(o))+t>e?e-t:r}return i}for(var u=document.cookie.split(";"),d=0;d<u.length;d++){var c=u[d].substring(0,u[d].indexOf("=")).replace(/ /gi,""),f=u[d].substring(u[d].indexOf("=")+1);if(/^rPopup/.test(c)&&o==parseInt(f))return!0}var v={imgSrc:void 0,mobile_imgSrc:void 0,htmlCode:void 0,linkHref:void 0,linkTarget:"_self",positionTop:void 0,positionLeft:void 0,footerBar:!0,headerText:"",footerText:"Don't show this again",buttonText:"CLOSE",responsive:void 0,responsiveMaxWidth:void 0};for(key in t)v[key]=t[key];void 0!=v.responsive&&(s=v.responsive),void 0!=v.responsiveMaxWidth&&(r=parseInt(v.responsiveMaxWidth));var h='<div class="rPopup" data-idx="'+o+'"><div class="rPopup_wrap"><div class="rPopup_header"><h3><span>'+v.headerText+'</span></h3><button type="button">&times;</button></div><div class="rPopup_body">';void 0!=v.linkHref&&(h+='<a href="'+v.linkHref+'" target="'+v.linkTarget+'">'),void 0!=v.imgSrc&&(h+='<img src="'+v.imgSrc+'" alt="" class="rPopupDesktopImg">'),void 0!=v.mobile_imgSrc&&(h+='<img src="'+v.mobile_imgSrc+'" alt="" class="rPopupMobileImg">'),void 0!=v.htmlCode&&(h+=v.htmlCode),void 0!=v.linkHref&&(h+="</a>"),h+="</div>",v.footerBar&&(h+='<div class="rPopup_footer"><label><input type="checkbox" class="popupChk"><span>'+v.footerText+'</span></label><button type="button">'+v.buttonText+"</button></div>"),h+="</div></div>",e("body").append(h);var l=e('.rPopup[data-idx="'+o+'"]'),m=v.positionLeft,g=v.positionTop;if(/<img/.test(h))l.find("img").on("load",function(e,o,t){var i=l.outerWidth(),s=l.outerHeight();void 0!=m&&l.css({left:n(p,m,i)}),void 0!=g&&l.css({top:n(a,g,s)})});else{var b=l.outerWidth(),P=l.outerHeight();void 0!=m&&l.css({left:n(p,m,b)}),void 0!=g&&l.css({top:n(a,g,P)})}l.show(),i()})}function i(){s&&(r<p?e(".rPopup").hasClass("rPopup_mobile")&&(e(".rPopup").removeClass("rPopup_mobile"),e(".rPopupDesktopImg").show(),e(".rPopupMobileImg").hide()):(e(".rPopup").addClass("rPopup_mobile").css({"z-index":9998}).hide().eq(0).show(),e(".rPopup").each(function(){var o=e(this).find(".rPopupDesktopImg"),t=e(this).find(".rPopupMobileImg");t.length>0&&(o.hide(),t.show())})))}var s=!0,r=720,n=e(document),p=n.innerWidth()-2,a=n.innerHeight()-2,u=o;switch(e.type(u)){case"undefined":t([{}]);break;case"object":t([u]);break;case"array":t(u)}var d=!0;e(window).resize(function(){d&&(e(".rPopup").hide(),d=!1),this.resizeTO&&clearTimeout(this.resizeTO),this.resizeTO=setTimeout(function(){e(this).trigger("resizeEnd")},300)}).on("resizeEnd",function(){p=n.innerWidth()-2,a=n.innerHeight()-2,e(".rPopup").each(function(){var o=e(this),t=o.outerWidth(),i=o.outerHeight(),s=parseInt(o.css("left")),r=parseInt(o.css("top")),n=i+r;t+s>=p&&o.css({left:p-t}),s<=0&&o.css({left:0}),n>=a&&o.css({top:a-i}),r<=0&&o.css({top:0})}),d=!0,e(".rPopup").show(),i()}),e(".rPopup_header").mousedown(function(o){var t=e(this).closest(".rPopup"),i=o.pageX-t.offset().left,s=o.pageY-t.offset().top;e(document).mousemove(function(e){var o=e.pageX-i,r=e.pageY-s;t.css({top:r,left:o});var n=t.outerWidth(),u=t.outerHeight();o<=0&&r<=0?t.css({left:0,top:0}):o<=0?t.css({left:0}):r<=0&&t.css({top:0});var d=o+n,c=r+u;d>=p&&c>=a?t.css({left:p-n,top:a-u}):d>=p?t.css({left:p-n}):c>=a&&t.css({top:a-u})}).mouseup(function(){n.unbind("mousemove")})}).mouseup(function(){n.unbind("mousemove")}),e(".rPopup").mousedown(function(){e(".rPopup").css({"z-index":9998}),e(this).css({"z-index":9999})}).on("selectstart dragstart",function(){return!1}).find("button").click(function(){var o=e(this).closest(".rPopup"),t=o.data("idx");o.find(".popupChk").is(":checked")&&function(e,o,t){var i=new Date;i.setDate(i.getDate()+t),document.cookie=e+"="+escape(o)+"; path=/; expires="+i.toGMTString()+";"}("rPopup"+t,t,1),o.remove(),e(".rPopup").eq(0).show()})}}(jQuery);